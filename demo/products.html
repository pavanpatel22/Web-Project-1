<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shop Products | Patel Store</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="../activity-tracker.css">
</head>

<body>
  <!-- ================= HEADER ================= -->
  <header>
    <nav>
      <div class="nav-container container">
        <a class="logo" href="index.html">Patel</a>

        <div class="nav-links">
          <a href="index.html">Home</a>
          <a href="products.html">Products</a>
          <a href="cart.html" class="cart-icon">
            Cart
            <span class="cart-count">0</span>
          </a>
        </div>
      </div>
    </nav>
  </header>

  <!-- ================= MAIN CONTENT ================= -->
  <main class="container">
    <section class="products-header">
      <h1>Available Products</h1>

      <div class="filters">
        <select id="category-filter">
          <option value="all">All Categories</option>
          <option value="audio">Audio</option>
          <option value="wearables">Wearables</option>
          <option value="accessories">Accessories</option>
        </select>

        <select id="sort-filter">
          <option value="default">Sort by: Featured</option>
          <option value="price-low">Price: Low to High</option>
          <option value="price-high">Price: High to Low</option>
          <option value="name">Name: A to Z</option>
        </select>
      </div>
    </section>

    <!-- Product grid gets filled dynamically -->
    <div id="products-grid" class="products-grid"></div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container footer-container">
      <div class="footer-left">
        <h3>Patel Tech Store</h3>
        <p>Premium gadgets and accessories for tech enthusiasts worldwide.</p>
      </div>
      <div class="footer-center">
        <h4>Quick Links</h4>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="products.html">Products</a></li>
        </ul>
      </div>
      <div class="footer-right">
        <h4>Follow Us</h4>
        <div class="social-icons">
          <a href="#"><i class="fab fa-facebook-f"></i></a>
          <a href="#"><i class="fab fa-twitter"></i></a>
          <a href="#"><i class="fab fa-instagram"></i></a>
        </div>
        <h4>Subscribe</h4>
        <form class="newsletter-form">
          <input type="email" placeholder="Your email" required>
          <button type="submit"><i class="fa fa-paper-plane"></i></button>
        </form>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 Patel Tech Store. All rights reserved.</p>
    </div>
  </footer>

  <!-- ================= SCRIPTS ================= -->
  <script src="../activity-tracker.js"></script>
  <script src="cart.js"></script>

  <script>
    /* Product Listing Script â€” revised formatting only */

    document.addEventListener('DOMContentLoaded', () => {
      loadProducts();
      setupFilters();
    });

    const products = [
      {
        id: 'p1',
        name: 'Premium Wireless Headphones',
        price: 199.99,
        category: 'audio',
        image: 'https://prd.place/408',
        description: 'Top-notch wireless headphones with noise cancelling tech.'
      },
      {
        id: 'p2',
        name: 'Smart Fitness Watch',
        price: 149.99,
        category: 'wearables',
        image: 'https://prd.place/409',
        description: 'Advanced smartwatch to help track your daily fitness goals.'
      },
      {
        id: 'p3',
        name: 'Portable Bluetooth Speaker',
        price: 79.99,
        category: 'audio',
        image: 'https://prd.place/410',
        description: 'Compact speaker with rich sound for travel and outdoor fun.'
      },
      {
        id: 'p4',
        name: 'True Wireless Earbuds',
        price: 129.99,
        category: 'audio',
        image: 'https://prd.place/411',
        description: 'Lightweight, comfortable earbuds ideal for everyday listening.'
      },
      {
        id: 'p5',
        name: '20000mAh Power Bank',
        price: 49.99,
        category: 'accessories',
        image: 'https://prd.place/412',
        description: 'Reliable high-capacity power bank for charging multiple devices.'
      },
      {
        id: 'p6',
        name: 'Fast Wireless Charger',
        price: 39.99,
        category: 'accessories',
        image: 'https://via.placeholder.com/300',
        description: 'Qi-enabled charger for efficient, cable-free charging.'
      }
    ];

    // === Render Product Cards ===
    function loadProducts(filtered = products) {
      const grid = document.getElementById('products-grid');
      grid.innerHTML = '';

      filtered.forEach(item => {
        const card = document.createElement('div');
        card.className = 'product-card';
        card.innerHTML = `
          <img src="${item.image}" alt="Product - ${item.name}" class="product-image" />
          <div class="product-info">
            <h3 class="product-title">${item.name}</h3>
            <p class="product-price">$${item.price.toFixed(2)}</p>
            <p class="product-category">${item.category}</p>
            <div class="product-actions">
              <a href="product1.html" class="btn btn-secondary">View Details</a>
              <button 
                class="btn btn-primary" 
                onclick="addToCart(${JSON.stringify(item).replace(/"/g, '&quot;')})">
                Add to Cart
              </button>
            </div>
          </div>
        `;
        grid.appendChild(card);
      });
    }

    // === Category & Sorting Filters ===
    function setupFilters() {
      const categorySelect = document.getElementById('category-filter');
      const sortSelect = document.getElementById('sort-filter');

      const applyFilters = () => {
        let result = [...products];

        if (categorySelect.value !== 'all') {
          result = result.filter(p => p.category === categorySelect.value);
        }

        switch (sortSelect.value) {
          case 'price-low':
            result.sort((a, b) => a.price - b.price);
            break;
          case 'price-high':
            result.sort((a, b) => b.price - a.price);
            break;
          case 'name':
            result.sort((a, b) => a.name.localeCompare(b.name));
            break;
        }

        loadProducts(result);
      };

      categorySelect.addEventListener('change', applyFilters);
      sortSelect.addEventListener('change', applyFilters);
    }

    // === Cart Integration ===
    function addToCart(product) {
      cart.addToCart(product);
      showNotification(`${product.name} added to your cart.`);
    }

    // === Notification Message ===
    function showNotification(msg) {
      const note = document.createElement('div');
      note.className = 'notification';
      note.textContent = msg;
      document.body.appendChild(note);

      setTimeout(() => note.classList.add('show'), 100);

      setTimeout(() => {
        note.classList.remove('show');
        setTimeout(() => note.remove(), 300);
      }, 3000);
    }
  </script>
</body>
</html>
